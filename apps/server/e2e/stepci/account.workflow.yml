version: "1.1"
name: Methylphenidate
env:
  protocol: http
  host: localhost
  port: 1337
tests:
  account-registration:
    steps:
      - name: Register Account
        http:
          url: ${{env.protocol}}://${{env.host}}:${{env.port}}/account
          method: POST
          check:
            status: /^20/
          headers:
            Content-Type: application/json
          json:
            username: ${{ internet.userName | fake }}
            password: ${{ internet.password | fake }}
            email: ${{ internet.email | fake }}
          captures:
            email:
              jsonpath: $.email
      - name: POST /account/verification/resend-verification-email
        http:
          url: ${{env.protocol}}://${{env.host}}:${{env.port}}/account/verification/resend-verification-email?email=${{ captures.email }}
          method: POST
          check:
            status: /^20/
          headers:
            Content-Type: application/json
      - name: POST /account/verification/verify-email
        http:
          url: ${{env.protocol}}://${{env.host}}:${{env.port}}/account/verification/verify-email?verification_code=verification_code
          method: POST
          check:
            status: /^20/
          headers:
            Content-Type: application/json