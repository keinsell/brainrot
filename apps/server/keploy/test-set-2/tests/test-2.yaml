version: api.keploy.io/v1beta1
kind: Http
name: test-2
spec:
    metadata: {}
    req:
        method: GET
        proto_major: 1
        proto_minor: 1
        url: http://localhost:1337/api/openapi3.json
        header:
            Accept: '*/*'
            Accept-Encoding: gzip, deflate, br
            Accept-Language: pl,en-US;q=0.7,en;q=0.3
            Connection: keep-alive
            Cookie: firstVisit=1703111356608; sentrysid=.eJxVkM1OwzAQhN_FZxTZdWJ7c6NSEVx65MAlWjs2iRKSkrWBquq7Y0sFqbfVN_szsxdGtHbUCtZeWCTWCs2lUKA0ryRI2eyuD6zDFIcukd-6sWctE-yOWXSTX4pAfonbuUpxnKkqDdXhA8f5MVf7W9Pd5IA05DFQSqpgGy41Sht0H1wNiMZ5bQQ4gcHW6FXwAHanLYBDo6GujWhQBCh2KPVr3nSUJ_mmlm1p6KWcolRy-Z9TcV2SmZprnpWxn_-Q5saYjOI6ZZRej9P5_Pn9fICnDNMtcP4Cujh--XV7_w_Krr8U5WEU:1rGKJg:fFtNJoaXukUIrpJ8MMVJjKiUxp6qDaBC0sziormtSrk; sc=V2Jsj4RDn0Ptav0PxW8Q063ybqHS8BQhLo7Hq460fhAyMr41dUvzs6I22d6F001o; cockpit=deleted; connect.sid=s%3A1Y9ILm1kC4GYbbrspeNaZNkms1XLbGKA.badt8vRn22t7q6HSgmU1vVYFDesE0yBHaeKgv%2BwVBOk; CSRF-Token-2ZQT3IJ=2DU3CuND3CRSwmg54Xg5LfncXhaUCy2w; su=uVNkyyqwHE9F:1rGKJg:zxSn65on1CiK_NmitJejzFRb_CUtwEGWFeiZFJt2244
            Host: localhost:1337
            If-Modified-Since: Wed, 27 Dec 2023 20:29:48 GMT
            If-None-Match: W/"2805-18cacf812d9"
            Referer: http://localhost:1337/api/
            Sec-Fetch-Dest: empty
            Sec-Fetch-Mode: cors
            Sec-Fetch-Site: same-origin
            User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:120.0) Gecko/20100101 Firefox/120.0
        body: ""
        body_type: ""
        timestamp: 2023-12-27T21:34:23.850017123+01:00
        host: ""
    resp:
        status_code: 200
        header:
            Accept-Ranges: bytes
            Cache-Control: public, max-age=0
            Connection: keep-alive
            Content-Length: "10255"
            Content-Type: application/json; charset=UTF-8
            Date: Wed, 27 Dec 2023 20:34:23 GMT
            Etag: W/"280f-18cacfc2f96"
            Keep-Alive: timeout=5
            Last-Modified: Wed, 27 Dec 2023 20:34:17 GMT
            X-Powered-By: Express
        body: '{"openapi":"3.0.0","paths":{"/account":{"post":{"operationId":"register","summary":"Register account","description":"","tags":["account"],"parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterAccount"}}}},"responses":{"200":{"description":"Account was successfully registered in system.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}}}}},"patch":{"operationId":"update-account","summary":"","description":"Update details of account.","tags":["account"],"parameters":[],"responses":{"200":{"description":""}}}},"/account/delete-account":{"post":{"operationId":"delete-account","summary":"","description":"Deletes the user''s account.","tags":["account"],"parameters":[],"responses":{"201":{"description":""}}}},"/account/recovery/forgot-password":{"post":{"operationId":"forgot-password","summary":"Request password reset","description":"Sends a password reset email","tags":["account-recovery"],"parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecoverAccount"}}}},"responses":{"201":{"description":""}}}},"/account/recovery/reset-password":{"post":{"operationId":"reset-password","summary":"Reset password","description":"Resets the user''s password","tags":["account-recovery"],"parameters":[{"name":"code","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"201":{"description":""}}}},"/account/verification/verify-email":{"post":{"operationId":"verify-email","summary":"Verify Email","description":"Verifies the userâ€™s email","tags":["account"],"parameters":[{"name":"verification_code","required":true,"in":"query","example":"verification_code","schema":{"type":"string"}}],"responses":{"201":{"description":""}}}},"/account/verification/resend-verification-email":{"post":{"operationId":"resend-verification-email","summary":"Re-send verification email","description":"Resends the verification email","tags":["account"],"parameters":[{"name":"email","required":true,"in":"query","description":"Email of created account to which verification email should be sent","example":"Cleveland49@yahoo.com","schema":{"type":"string"}}],"responses":{"201":{"description":""}}}},"/authenticate":{"post":{"operationId":"authenticate","summary":"Basic Authentication","description":"Logs the user in with usage of a username and password.","tags":["authentication"],"parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Auhenticate"}}}},"responses":{"201":{"description":"The user has been successfully authenticated and session was created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthenticationResponse"}}}},"404":{"description":"The user could not be found."}},"security":[{"basic":[]}]},"get":{"operationId":"whoami","summary":"Who am I?","description":"Returns the current user","tags":["authentication"],"parameters":[],"responses":{"200":{"description":"Account was found in system, and returned.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}}}},"security":[{"bearer":[]}]}},"/session/refresh-session":{"post":{"operationId":"refresh-session","summary":"","description":"Use a refresh token to extend a session and generate another access token","tags":["session"],"parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshSession"}}}},"responses":{"201":{"description":""}}}},"/health":{"get":{"operationId":"healthcheck","summary":"Health check endpoint","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}}}}}}}}}}},"/product":{"post":{"operationId":"create-product","summary":"Create product","tags":["product"],"parameters":[],"responses":{"201":{"description":""}}},"get":{"operationId":"list-products","summary":"List products","tags":["product"],"parameters":[],"responses":{"200":{"description":""}}}},"/product/{id}":{"get":{"operationId":"get-product","summary":"Get product","tags":["product"],"parameters":[],"responses":{"200":{"description":""}}},"patch":{"operationId":"ProductController_updateProduct","parameters":[],"responses":{"200":{"description":""}}},"delete":{"operationId":"ProductController_deleteProduct","parameters":[],"responses":{"200":{"description":""}}}},"/cart/{id}":{"get":{"operationId":"get-cart","summary":"Get a Cart","description":"Retrieve a Cart''s details. This includes recalculating its totals.","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}},"put":{"operationId":"CartController_updateCart","parameters":[],"responses":{"200":{"description":""}}},"post":{"operationId":"CartController_deleteCart","parameters":[],"responses":{"201":{"description":""}}}},"/cart/{id}/checkout":{"post":{"operationId":"CartController_checkoutCart","parameters":[],"responses":{"201":{"description":""}}},"delete":{"operationId":"CartController_cancelCheckoutCart","parameters":[],"responses":{"200":{"description":""}}}},"/region/{id}":{"get":{"operationId":"get-region","summary":"Get a Region","description":"Retrieve a Region''s details.","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}}},"info":{"title":"methylophenidate","description":"Methylophenidate is a boilerplate for Nest.js applications with batteries included.","version":"1.0","contact":{}},"tags":[{"name":"api","description":""}],"servers":[],"components":{"schemas":{"RecoverAccount":{"type":"object","properties":{"username":{"type":"string","description":"Username of account","example":""},"method":{"type":"string","description":"Recovery Method","example":""}}},"AuthenticationResponse":{"type":"object","properties":{"id":{"type":"string","description":"ID of authenticated domain."},"mfa":{"type":"boolean","description":"Indicates if domain uses MFA. In case of true, additional steps are supposed to be made to activate access token."},"accessToken":{"type":"string","description":"Access token."},"refreshToken":{"type":"string","description":"Refresh token."}},"required":["id","mfa","accessToken","refreshToken"]},"RefreshSession":{"type":"object","properties":{"refreshToken":{"type":"string","description":"...","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXlsb2FkIjp7fSwiaWF0IjoxNzAzNzA5MjU2fQ.-eGMhkYgRlGPmU6PWjlzoTNuCaosQCCWb9Mu8J918iA","examples":["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXlsb2FkIjp7fSwiaWF0IjoxNzAzNzA5MjU2fQ.-eGMhkYgRlGPmU6PWjlzoTNuCaosQCCWb9Mu8J918iA","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXlsb2FkIjp7fSwiaWF0IjoxNzAzNzA5MjU2fQ.-eGMhkYgRlGPmU6PWjlzoTNuCaosQCCWb9Mu8J918iA","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXlsb2FkIjp7fSwiaWF0IjoxNzAzNzA5MjU2fQ.-eGMhkYgRlGPmU6PWjlzoTNuCaosQCCWb9Mu8J918iA"]}},"required":["refreshToken"]},"RegisterAccount":{"type":"object","properties":{"email":{"type":"string","description":"The domain''s email address","example":"Cleveland49@yahoo.com","examples":["Raul_Marks@gmail.com","Buddy.Schulist@gmail.com","Anibal_Pouros@hotmail.com"]},"password":{"type":"string","description":"The domain''s password","example":"SuperSecretPassword123!","examples":["LaW1KVuo69FG5Pf","9srQfkporSDhU76","74ETrfy3OQCdUzs"]},"username":{"type":"string","description":"The domain''s username","example":"Angie_Wisoky65","examples":["Raul_Marks","Buddy.Schulist","Anibal_Pouros"]}},"required":["email","password","username"]},"Account":{"type":"object","properties":{"id":{"type":"string","description":"The domain''s unique identifier","example":"cjld2cjxh0000qzrmn831i7rn"},"email":{"type":"string","description":"The domain''s email address","example":"Cleveland49@yahoo.com","examples":["Raul_Marks@gmail.com","Buddy.Schulist@gmail.com","Anibal_Pouros@hotmail.com"]},"emailVerified":{"type":"boolean","description":"Indicates whether the email associated with a user domain has been verified","example":true},"username":{"type":"string","description":"The domain''s username","example":"Angie_Wisoky65","examples":["Raul_Marks","Buddy.Schulist","Anibal_Pouros"]}},"required":["id","email","emailVerified","username"],"description":"asdasd"},"Auhenticate":{"type":"object","properties":{"username":{"type":"string","description":"The domain''s username","example":"Angie_Wisoky65","examples":["Diana.Mraz41","Graham0","Warren.Connelly"]},"password":{"type":"string","description":"The domain''s password","example":"SuperSecretPassword123!","examples":["b63uMsfdiD7d2TK","80BjzpP5SbnW6ox","N3y0iAB6sCI3knz"]}},"required":["username","password"],"description":"asdasd"}}}}'
        body_type: ""
        status_message: ""
        proto_major: 0
        proto_minor: 0
        timestamp: 2023-12-27T21:34:25.318436525+01:00
    objects: []
    assertions:
        noise:
            body.components.schemas.Account.properties.username.examples: []
            body.components.schemas.Auhenticate.properties.password.examples: []
            body.components.schemas.Auhenticate.required: []
            body.components.schemas.RegisterAccount.properties.password.examples: []
            body.components.schemas.RegisterAccount.properties.username.examples: []
            body.components.schemas.RegisterAccount.required: []
            body.paths./authenticate.get.responses.200.description: []
            header.Cache-Control: []
            header.Date: []
            header.Last-Modified: []
    created: 1703709265
curl: |
    curl --request GET \
      --url http://localhost:1337/api/openapi3.json \
      --header 'Sec-Fetch-Dest: empty' \
      --header 'If-Modified-Since: Wed, 27 Dec 2023 20:29:48 GMT' \
      --header 'Connection: keep-alive' \
      --header 'If-None-Match: W/"2805-18cacf812d9"' \
      --header 'Accept: */*' \
      --header 'Accept-Language: pl,en-US;q=0.7,en;q=0.3' \
      --header 'Cookie: firstVisit=1703111356608; sentrysid=.eJxVkM1OwzAQhN_FZxTZdWJ7c6NSEVx65MAlWjs2iRKSkrWBquq7Y0sFqbfVN_szsxdGtHbUCtZeWCTWCs2lUKA0ryRI2eyuD6zDFIcukd-6sWctE-yOWXSTX4pAfonbuUpxnKkqDdXhA8f5MVf7W9Pd5IA05DFQSqpgGy41Sht0H1wNiMZ5bQQ4gcHW6FXwAHanLYBDo6GujWhQBCh2KPVr3nSUJ_mmlm1p6KWcolRy-Z9TcV2SmZprnpWxn_-Q5saYjOI6ZZRej9P5_Pn9fICnDNMtcP4Cujh--XV7_w_Krr8U5WEU:1rGKJg:fFtNJoaXukUIrpJ8MMVJjKiUxp6qDaBC0sziormtSrk; sc=V2Jsj4RDn0Ptav0PxW8Q063ybqHS8BQhLo7Hq460fhAyMr41dUvzs6I22d6F001o; cockpit=deleted; connect.sid=s%3A1Y9ILm1kC4GYbbrspeNaZNkms1XLbGKA.badt8vRn22t7q6HSgmU1vVYFDesE0yBHaeKgv%2BwVBOk; CSRF-Token-2ZQT3IJ=2DU3CuND3CRSwmg54Xg5LfncXhaUCy2w; su=uVNkyyqwHE9F:1rGKJg:zxSn65on1CiK_NmitJejzFRb_CUtwEGWFeiZFJt2244' \
      --header 'Referer: http://localhost:1337/api/' \
      --header 'Accept-Encoding: gzip, deflate, br' \
      --header 'Host: localhost:1337' \
      --header 'Sec-Fetch-Mode: cors' \
      --header 'Sec-Fetch-Site: same-origin' \
      --header 'User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:120.0) Gecko/20100101 Firefox/120.0' \
